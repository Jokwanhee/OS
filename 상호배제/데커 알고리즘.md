# λ°μ»¤ μ•κ³ λ¦¬μ¦(Dekker Algorithm)
`μ°μ„  μ•μ•„μ•Όν•  κ²ƒμ€ λ°μ»¤ μ•κ³ λ¦¬μ¦μ€ μƒνΈλ°°μ λ¥Ό ν•΄κ²°ν•λ” λ‹¤μ–‘ν• λ°©λ²•μ΄λ‹¤. μ¦‰, λ³‘ν–‰ ν”„λ΅κ·Έλλ°μ μƒνΈλ°°μ  λ¬Έμ λ¥Ό ν’€ μ μλ” ν•΄κ²°μ±…μ΄λ‹¤.`<br>

## λ°μ»¤ μ•κ³ λ¦¬μ¦

### μ©μ–΄ μ •λ¦¬
```text
π€ λ³‘ν–‰ ν”„λ΅μ„Έμ¤λ€?
: ν”„λ΅μ„Έμ„ ν•λ‚λ” ν• λ²μ— ν”„λ΅μ„Έμ¤ ν•λ‚λ§ μ‹¤ν–‰ν•  μ μλ‹¤. ν•μ§€λ§ μ΄μμ²΄μ κ°€ ν”„λ΅μ„Έμ„λ¥Ό λΉ λ¥΄κ² μ „ν™ν•μ—¬ 
ν”„λ΅μ„Έμ„ μ‹κ°„μ„ λ‚λ μ„ λ§μΉ ν”„λ΅μ„Έμ¤ μ—¬λ¬ κ°λ¥Ό λ™μ‹μ— μ‹¤ν–‰ν•λ” κ²ƒμ²λΌ λ³΄μ΄κ² ν•λ” κ²ƒμ„ λ³‘ν–‰ ν”„λ΅μ„Έμ¤λΌκ³  ν•λ‹¤.

π€ μƒνΈλ°°μ λ€?
: λ³‘ν–‰ ν”„λ΅μ„Έμ¤μ—μ„ ν”„λ΅μ„Έμ¤ ν•λ‚κ°€ κ³µμ  μμ›(μ„κ³„ μμ›)μ„ μ‚¬μ©ν•  λ• λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ“¤μ΄ λ™μΌν• μΌμ„ ν•  μ μ—†λ„λ΅ ν•λ” λ°©λ²•

π€ μ„κ³„ μμ—­μ΄λ€?
: λ‹¤μμ ν”„λ΅μ„Έμ¤κ°€ μ ‘κ·Όν•  μ μμ§€λ§, μ–΄λ ν•μκ°„μ—λ” ν”„λ΅μ„Έμ¤ ν•λ‚λ§ μ‚¬μ©ν•  μ μλ‹¤. 
μ–΄λ–¤ ν”„λ΅μ„Έμ¤κ°€ μ„κ³„ μμ—­μ— λ“¤μ–΄κ°€λ©΄ λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ” μ„κ³„ μμ—­μ— λ“¤μ–΄κ° μ μ—†λ‹¤.
```
### μ •μ
```text
π― λ°μ»¤ μ•κ³ λ¦¬μ¦μ΄λ€?
μ†ν”„νΈμ›¨μ–΄λ΅ μƒνΈλ°°μ λ¥Ό ν•΄κ²°ν•λ” λ°©λ²•μΌλ΅ λ‘ ν”„λ΅μ„Έμ¤κ°€ μ„λ΅ ν†µμ‹ ν•λ ¤κ³  κ³µμ  λ©”λ¨λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ μ¶©λ μ—†μ΄ 
λ‹¨μΌ μμ›μ„ κ³µμ ν•  μ μλ„λ΅ ν—μ©ν•λ” μ•κ³ λ¦¬μ¦μ΄λ‹¤.
```
### μ΅°κ±΄
```text
1. λ‘ ν”„λ΅μ„Έμ¤κ°€ λ™μ‹μ— μ„κ³„ μμ—­μ— μ§„μ…ν•λ ¤κ³  μ‹λ„ν•λ©΄ μμ„μ— λ”°λΌ μ¤μ§ ν•λ‚λ§ μ„κ³„μμ—­μ— λ“¤μ–΄κ°€λ„λ΅ ν—μ©ν•λ‹¤.  
2. κ° ν”„λ΅μ„Έμ¤λ” ν”λκ·Έλ¥Ό μ„¤μ •ν•μ—¬ κ·Έ ν”λκ·Έμ— λ§κ² μ°¨λ΅€λ¥Ό κΈ°λ‹¤λ¦°λ‹¤.
```

### μ½”λ“ μ„¤λ…ν•κΈ°
`Explain`
```text
μ§±κµ¬ : ν”„λ΅μ„Έμ¤ #1
μ² μ : ν”„λ΅μ„Έμ¤ #2
ν™”μ¥μ‹¤ : μ„κ³„ μμ—­

κ³µμ μμ›
flag μ μ΄κΈ°κ°’μ€ flag[0] = flag[1] = false λ΅ μ§„ν–‰ν•λ©° 
turn λ΅ κ°’ λ³€κ²½ μ‹ ν”„λ΅μ„Έμ¤κ°€ μ„κ³„ μμ—­μ— λ“¤μ–΄κ°„λ‹¤λ” μ‚¬μ‹¤μ„ μ•λ¦¬κ² λλ‹¤.

flag[0] = true : μ§±κµ¬κ°€ ν™”μ¥μ‹¤μ„ λ“¤μ–΄κ°„λ‹¤λ” μ‚¬μ‹¤μ„ μ•λ¦Ό.
flag[1] = true : μ² μκ°€ ν™”μ¥μ‹μ„ λ“¤μ–΄κ°„λ‹¤λ” μ‚¬μ‹¤μ„ μ•λ¦Ό. 

turn : μ§±κµ¬μ™€ μ² μκ°€ λ™μ‹μ— ν™”μ¥μ‹¤μ— λ“¤μ–΄κ°€λ ¤κ³  μ¶©λν•λ” κ²ƒμ„ λ°©μ§€ν•λ” κ³µμ  λ³€μ
    - 0 : μ§±κµ¬ μμ„
    - 1 : μ² μ μμ„

```
```text
μ§±κµ¬μ™€ μ² μκ°€ λ™μ‹μ— ν™”μ¥μ‹¤μ— μ§„μ…ν•λ ¤κ³  ν•λ‹¤.
(1) turn = 0 μΌλ΅ μ§±κµ¬μ μμ„λ΅ μ΄κΈ° κ°’ μ„¤μ •
(2) μ§±κµ¬κ°€ ν™”μ¥μ‹¤ λ…Έν¬λ¥Ό ν•κ³  λ™μ‹μ— μ² μλ„ ν™”μ¥μ‹¤μ„ λ…Έν¬ν•λ‹¤.
(3) μ§±κµ¬μ μμ„μ΄λ―€λ΅ μ§±κµ¬κ°€ μ•μ— λ“¤μ–΄κ°„λ‹¤. -> μ² μ λ€κΈ°
(4) μ§±κµ¬κ°€ ν™”μ¥μ‹¤μ— λ‚μ¤κ³  μ² μκ°€ ν™”μ¥μ‹¤μ— λ‹¤μ‹ λ“¤μ–΄κ°.
(5) λ‹¤μ‹ μ§±κµ¬λ” ν™”μ¥μ‹¤μ„ λ…Έν¬ν•λ‹¤.
(6) μ² μκ°€ ν™”μ¥μ‹¤μ— μμΌλ‹ -> μ§±κµ¬ λ€κΈ°
(7) μ² μκ°€ ν™”μ¥μ‹¤μ—μ„ λ‚μ¤κ³  μ§±κµ¬κ°€ ν™”μ¥μ‹¤μ— λ‹¤μ‹ λ“¤μ–΄κ°.
μ„μ™€ κ°™μ€ μƒν™©μ΄ κ³„μ†ν•΄μ„ λ°λ³µλλ‹¤.

μ—¬κΈ°μ„ μ£Όλ©ν•΄μ•Ό ν•  μ μ€ μ„μ—μ„ μ–ΈκΈ‰ν• μ΅°κ±΄μ— μ¶©μ΅±ν–λƒ? μ΄λ‹¤
1. λ‘ ν”„λ΅μ„Έμ¤(μ§±κµ¬μ™€ μ² μ)κ°€ λ™μ‹μ— μ„κ³„ μμ—­(ν™”μ¥μ‹¤)μ— μ§„μ…(λ…Έν¬)ν•λ ¤κ³  ν–κ³ , 
μμ„(turn)μ— λ”°λΌμ„ μ¤μ§ ν•λ‚λ§ μ„κ³„ μμ—­(ν™”μ¥μ‹¤)μ— μ§„μ…ν•μ€λ‹¤.
2. κ° flagλ¥Ό μ„¤μ •ν•μ—¬ λ‘ ν”„λ΅μ„Έμ¤(μ§±κµ¬μ™€ μ² μ)κ°€ μ„κ³„ μμ—­(ν™”μ¥μ‹¤)μ— λ“¤μ–΄κ°”λ” μ§€ ν™•μΈν•λ©° μμ„(turn) μ„ ν™•μΈν•λ©° 
ν”„λ΅μ„Έμ¤(μ§±κµ¬ λ° μ² μ)λ¥Ό λ€κΈ°μ‹ν‚¬ κ²ƒμΈμ§€ ν”„λ΅μ„Έμ¤(μ§±κµ¬ λ° μ² μ)λ¥Ό μ„κ³„ μμ—­(ν™”μ¥μ‹¤)μΌλ΅ λ„£μ„ κ²ƒμΈμ§€ μμ„λ¥Ό μ •ν•μ€λ‹¤.

μ„ λ‘ μ΅°κ±΄μ„ λ§μ΅±ν•μ—¬ μ•„λμ Kotlin μ½”λ“λ΅ Dekker Algorithm μ„ ν”„λ΅κ·Έλλ°μΌλ΅ κµ¬ν„ν•΄λ³΄μ•λ‹¤.
```
`Algorithm`
```kotlin
// κ³µμ  μμ›
var flag = mutableMapOf(0 to false, 1 to false) 
var turn = 0

// Process #1
inner class Thread1: Thread(){
    override fun run() {
        super.run()
        while (true) {
            flag[0] = true

            while (flag[1] == true){
                if (turn == 1){
                    flag[0] = false
                    while (turn == 1){
                        // λ€κΈ°
                    }
                    flag[0] = true
                }
            }
            turn = 1
            flag[0] = false
        }
    }
}

// Process #2
inner class Thread2: Thread(){
    override fun run() {
        super.run()

        while (true){
            flag[1] = true
            while (flag[0] == true){
                if (turn == 0){
                    flag[1] = false
                    while (turn == 0){
                        // λ€κΈ°
                    }
                    flag[1] = true 
                }
            }
            turn = 0
            flag[1] = false
        }
    }
}


```

`Kotlin Code Example`
```kotlin

class ProgramClass(){
    // λ‘ ν”„λ΅μ„Έμ¤κ°€ ν†µμ‹ ν•κΈ° μ„ν•΄ κ³µμ  λ©”λ¨λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ μ¶©λ μ—†μ΄ λ‹¨μΌ μμ›μ„ κ³µμ ν•  μ μλ‹¤.
    var flag = mutableMapOf(0 to false, 1 to false) // flag[0] = false, flag[1] = false
    var turn = 0 // μ§±κµ¬ μμ„

    inner class Thread1: Thread(){
        override fun run() {
            super.run()
            while (true) {
                println("μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...")
                flag[0] = true // μ§±κµ¬κ°€ ν™”μ¥μ‹¤ λ…Έν¬!
                sleep(500)

                // (1) μ§±κµ¬ λ…Έν¬ + μ² μλ” ν™”μ¥μ‹¤
                while (flag[1] == true){ // μ² μκ°€ ν™”μ¥μ‹¤μ— μλ‚?
                    if (turn == 1){ // μ² μ μμ„μ΄λ©΄ μ² μκ°€ μ•μ— μλ‹¤λ” κ²ƒμ΄ ν™•μΈ
                        println("μ² μκ°€ μ•μ— μμ–΄μ”")
                        flag[0] = false // μ§±κµ¬λ” ν™”μ¥μ‹¤ λ°–μ—μ„ λ€κΈ°

                        // turn == 1 μ¦‰, μ² μμ μμ„
                        while (turn == 1){ // κ³„μ†ν•΄μ„ μ² μκ°€ ν™”μ¥μ‹¤ μ•μ—μκ³  μ² μμ μμ„λΌλ©΄
                            println("μ§±κµ¬ κΈ°λ‹¤λ¦¬λ” μ¤‘..") // μ§±κµ¬ λ€κΈ°
                            sleep(1000)
                        }
                        println("μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...")
                        // turn == 0 μ¦‰, μ§±κµ¬μ μμ„
                        flag[0] = true // μ² μμ μμ„ μ¦‰, turn = 0 μΌλ΅ λ³€κ²½ μ‹ μ§±κµ¬μ μμ„κ°€ λμ—μ„ λ•, λ‹¤μ‹ μ§±κµ¬λ” ν™”μ¥μ‹¤μ— λ…Έν¬λ¥Ό ν•λ‹¤.
                    }
                }

                // (2) μ§±κµ¬ λ…Έν¬ + ν™”μ¥μ‹¤ μ•„λ¬΄λ„ μ—†μ
                // μ² μκ°€ ν™”μ¥μ‹¤μ— λ“¤μ–΄κ°€μ§€ μ•μ•λ‹¤λ©΄ μ§±κµ¬λ” ν™”μ¥μ‹¤μ— λ“¤μ–΄κ°„λ‹¤.
                println("μ§±κµ¬ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.")
                sleep(2000)

                // μμ„κ°€ μ² μμ μμ„λ΅ λ³€κ²½λμ—μΌλ©°
                turn = 1
                // μ§±κµ¬κ°€ ν™”μ¥μ‹¤μ„ λ‚μ΄.
                flag[0] = false
                println("μ§±κµ¬ ν™”μ¥μ‹¤μ—μ„ λ‚μ΄.")
                // ν•΄λ‹Ή sleep μ„ μ£Όλ” μ΄μ λ” μ§±κµ¬κ°€ ν™”μ¥μ‹¤μ—μ„ λ‚μ™”μ„ λ• μ² μκ°€ λ“¤μ–΄κ°€μ•Όν•λ”λ°, μ§±κµ¬κ°€ λ…Έν¬λ¥Ό ν•κ³  μ§±κµ¬κ°€ λ‹¤μ‹ λ“¤μ–΄κ°€λ” κ²ƒμ„ λ°©μ§€
                sleep(1000)
            }
        }
    }

    // λ‚΄λ¶€ ν΄λμ¤λ΅ μƒμ„ ν΄λμ¤μΈ ProgramClass μ μ „μ—­λ³€μμ λ©”λ¨λ¦¬λ¥Ό κ³µμ  λ°›μ„ μ μλ‹¤.
    inner class Thread2: Thread(){
        override fun run() {
            super.run()

            while (true){
                println("μ² μ ν™”μ¥μ‹¤ λ…Έν¬...")
                flag[1] = true // μ² μκ°€ ν™”μ¥μ‹¤μ„ λ…Έν¬ν•λ‹¤.
                sleep(500)
                while (flag[0] == true){ // μ§±κµ¬κ°€ ν™”μ¥μ‹¤μ— μλ‚?
                    if (turn == 0){ // μμ„λ” μ§±κµ¬μ μμ„
                        println("μ§±κµ¬κ°€ μ•μ— μμ–΄μ”.")
                        flag[1] = false // μ² μκ°€ ν™”μ¥μ‹¤ λ…Έν¬λ¥Ό μ¤‘λ‹¨ν•κ³  κΈ°λ‹¤λ¦¬κΈ°
                        while (turn == 0){ // μ§±κµ¬μ μμ„ λ™μ•μ— μ² μλ” κΈ°λ‹¤λ¦°λ‹¤
                            println("μ² μκ°€ κΈ°λ‹¤λ¦¬λ” μ¤‘...") // μ² μ λ€κΈ°
                            sleep(1000)
                        }
                        flag[1] = true // turn = 1 μ¦‰, μ² μμ μμ„μ΄λ―€λ΅ μ² μλ” ν™”μ¥μ‹¤μ— λ…Έν¬λ¥Ό λ‹¤μ‹ ν•λ‹¤.
                    }
                }

                // flag[0] == false μ¦‰, μ§±κµ¬λ” ν™”μ¥μ‹¤μ— μ—†λ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ— μ² μλ” ν™”μ¥μ‹¤μ— λ“¤μ–΄κ°„λ‹¤.
                println("μ² μ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.")
                sleep(2000)

                // μμ„λ” μ§±κµ¬μ μμ„λ΅ λ³€κ²½
                turn = 0
                // μ² μλ” ν™”μ¥μ‹¤μ—μ„ λ‚μ¨λ‹¤.
                flag[1] = false
                println("μ² μ ν™”μ¥μ‹¤μ—μ„ λ‚μ΄.")
                // ν•΄λ‹Ή sleep μ„ μ£Όλ” μ΄μ λ” μ² μκ°€ ν™”μ¥μ‹¤μ—μ„ λ‚μ™”μ„ λ• μ§±κµ¬κ°€ λ“¤μ–΄κ°€μ•Όν•λ”λ°, μ² μκ°€κ°€ λ…Έν¬λ¥Ό ν•κ³  μ² μκ°€ λ‹¤μ‹ λ“¤μ–΄κ°€λ” κ²ƒμ„ λ°©μ§€
                sleep(1000)
            }
        }
    }
}




fun main(){
    val programClass = ProgramClass()

    val thread1 = programClass.Thread1()
    val thread2 = programClass.Thread2()

    thread1.start()
    thread2.start()
    thread1.join()
    thread2.join()
}
```
`OUTPUT`
```kotlin
μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...
μ² μ ν™”μ¥μ‹¤ λ…Έν¬...
μ§±κµ¬κ°€ μ•μ— μμ–΄μ”.
μ§±κµ¬ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.
μ² μκ°€ κΈ°λ‹¤λ¦¬λ” μ¤‘...
μ² μκ°€ κΈ°λ‹¤λ¦¬λ” μ¤‘...
μ§±κµ¬ ν™”μ¥μ‹¤μ—μ„ λ‚μ΄.
μ² μ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.
μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...
μ² μκ°€ μ•μ— μμ–΄μ”
μ§±κµ¬ κΈ°λ‹¤λ¦¬λ” μ¤‘..
μ² μ ν™”μ¥μ‹¤μ—μ„ λ‚μ΄.
μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...
μ§±κµ¬ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.
μ² μ ν™”μ¥μ‹¤ λ…Έν¬...
μ§±κµ¬κ°€ μ•μ— μμ–΄μ”.
μ² μκ°€ κΈ°λ‹¤λ¦¬λ” μ¤‘...
μ§±κµ¬ ν™”μ¥μ‹¤μ—μ„ λ‚μ΄.
μ² μ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.
μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...
μ² μκ°€ μ•μ— μμ–΄μ”
μ§±κµ¬ κΈ°λ‹¤λ¦¬λ” μ¤‘..
μ² μ ν™”μ¥μ‹¤μ—μ„ λ‚μ΄.
μ§±κµ¬ ν™”μ¥μ‹¤ λ…Έν¬...
μ§±κµ¬ ν™”μ¥μ‹¤ λ“¤μ–΄κ°.
μ² μ ν™”μ¥μ‹¤ λ…Έν¬...
...
```